<h1 class="title">Experiments</h1>

<div class="experiments"></div>


<template id="experiment-template">
    <div class="experiment">
        <div class="lines"></div>
        <h2 class="row"></h2>
        <h3 class="row"></h3>
        <p class="row"></p>
        <a><button>More</button></a>
    </div>
    <pre></pre> <!--todo: check if prep is the correct tag type-->
</template>

<script>

    /**
     * initialize the construction of elements that will be rendered on the page
     */
    async function initialize(){
        
        const experiments = await fetch('/.netlify/functions/experiments')
        .then((response) => response.json());
        
        const container = document.querySelector('.experiments');
        if (experiments.experiment.length > 0){
            experiments.experiment.map(exp => {
                const template = document.querySelector('#experiment-template');
                const element = template.content.cloneNode(true);

                element.querySelector('h2').innerText = exp.name;
                element.querySelector('h3').innerText = exp.location;
                element.querySelector('p').innerText = exp.description;
                element.querySelector('a').href = `samples?experimentId=${exp.id}`;
                
                container.appendChild(element);
            })
        } else{
            const p = document.createElement("p");
            const text = document.createTextNode("No data yet");
            p.style.textAlign = "center";
            p.appendChild(text);
            container.appendChild(p);
        }
    }

    initialize()
</script>